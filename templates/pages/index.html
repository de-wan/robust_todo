{{ define "content" }}

<div class="flex justify-end gap-2 p-2">
    <div>
        <input class="w-50 px-4 py-2 border border-2 rounded-md focus:outline-none focus:border-indigo-500"
            placeholder="search" />
    </div>
    <button type="button" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
        hx-get="/add-todo" hx-trigger="click" hx-target="#content" hx-swap="innerHTML">
        Add Todo
    </button>
</div>

{{ template "todos" .}}

<div class="p-2 flex gap-2 items-center">
    <div>
        <select class="px-4 py-2 border border-2 rounded-md focus:outline-none focus:border-indigo-500">
            <option>5 per page</option>
            <option>10 per page</option>
            <option>25 per page</option>
            <option>50 per page</option>
        </select>
    </div>

    <div>
        <input type="number" class="w-20 px-4 py-2 border border-2 rounded-md focus:outline-none focus:border-indigo-500" min="1"> Of <span class="font-bold">10</span> Pages
    </div>
</div>
{{ end }}

{{ define "todos" }}
<div id="todos" class="px-4 p-2 divide-y pr-20">
    {{ range .Todos }}
    {{ template "todo-item" .}}
    {{ end}}
</div>
{{ end }}

{{ define "todo-item" }}
<div class="todo-item flex justify-between items-center group">
    <div class="flex gap-2">
        <input type="checkbox" class="form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500"
            hx-put="/toggle-todo/{{ .Uuid }}" hx-trigger="change" hx-target="closest .todo-item" hx-swap="outerHTML"
            {{if .DoneAt.Valid }}checked{{end}}>
        <div class="{{if .DoneAt.Valid }}line-through{{end}}">{{ .Value }}</div>
    </div>

    <div class="*:p-1 *:px-2">
        <button class="hover:bg-orange-100 text-blue-500 hover:text-orange-500 rounded" hx-get="/edit-todo/{{ .Uuid }}"
            hx-trigger="click" hx-target="#content" hx-swap="innerHTML">Edit</button>
        <button class="hover:bg-red-100 text-blue-500 hover:text-red-500 rounded" hx-delete="/archive-todo/{{ .Uuid }}"
            hx-trigger="click" hx-target="closest .todo-item" hx-swap="outerHTML"
            hx-confirm="Are you sure you want to archive this todo item?">Archive</button>
    </div>
</div>
{{ end }}